<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

  
  <button onclick="logout()" 
          style="position: absolute; top: 10px; right: 20px; 
               padding: 10px 20px; background: white; color: #667eea; 
               border: none; border-radius: 6px; cursor: pointer; 
               font-size: 15px; z-index: 200; font-weight: bold;" class="logout-btn">
    Logout
  </button>

  <script>
  function logout() {
    // remove login session
    localStorage.removeItem("loggedInUser"); // old key
    localStorage.removeItem("currentUser");  // new key
    localStorage.removeItem("showWelcome");  // clear welcome flag

    // redirect to login page
    window.location.href = "login.html";
  }

  // ✅ Prevent direct access without login
  if (!localStorage.getItem("currentUser")) {
    window.location.href = "login.html";
  }

  // ✅ Show welcome popup after login
  window.addEventListener("load", () => {
    const user = localStorage.getItem("currentUser");  // username from login
    const showWelcome = localStorage.getItem("showWelcome");

    if (user && showWelcome === "true") {
      const popup = document.createElement("div");
      popup.textContent = "Welcome, " + user + "!";
      popup.style.position = "fixed";
      popup.style.top = "20px";
      popup.style.left = "50%";
      popup.style.transform = "translateX(-50%)";
      popup.style.background = "#2575fc";
      popup.style.color = "white";
      popup.style.padding = "12px 20px";
      popup.style.borderRadius = "8px";
      popup.style.fontSize = "18px";
      popup.style.fontWeight = "bold";
      popup.style.boxShadow = "0 4px 10px rgba(0,0,0,0.2)";
      document.body.appendChild(popup);

      setTimeout(() => popup.remove(), 3000);

      // Reset flag so it doesn’t show again on refresh
      localStorage.setItem("showWelcome", "false");
    }
  });
</script>



    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1><i class="fas fa-graduation-cap"></i> College Companion</h1>
            <nav class="nav">
                <button class="nav-btn active" data-tab="timetable">Timetable</button>
                <button class="nav-btn" data-tab="assignments">Assignments</button>
                <button class="nav-btn" data-tab="attendance">Attendance</button>
                <button class="nav-btn" data-tab="notices">Notices</button>
            </nav>
        </header>
        

        <!-- Main Content -->
        <main class="main-content">
            <!-- Timetable Tab -->
            <section id="timetable" class="tab-content active">
                <div class="section-header">
                    <h2><i class="fas fa-calendar-alt"></i> Class Timetable</h2>
                    <button class="add-btn" onclick="openTimetableModal()">
                        <i class="fas fa-plus"></i> Add Class
                    </button>
                </div>
                <div class="timetable-container">
                    <div class="timetable-header">
                        <div class="time-column-header">Time</div>
                        <div class="day-header">Monday</div>
                        <div class="day-header">Tuesday</div>
                        <div class="day-header">Wednesday</div>
                        <div class="day-header">Thursday</div>
                        <div class="day-header">Friday</div>
                        <div class="day-header">Saturday</div>
                    </div>
                    
                    <div class="timetable-body">
                        <!-- Time slots from 8 AM to 6 PM -->
                        <div class="time-row">
                            <div class="time-slot-header">8:00 - 9:00</div>
                            <div class="class-slot" data-day="monday" data-time="08:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="08:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="08:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="08:00"></div>
                            <div class="class-slot" data-day="friday" data-time="08:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="08:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">9:00 - 10:00</div>
                            <div class="class-slot" data-day="monday" data-time="09:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="09:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="09:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="09:00"></div>
                            <div class="class-slot" data-day="friday" data-time="09:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="09:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">10:00 - 11:00</div>
                            <div class="class-slot" data-day="monday" data-time="10:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="10:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="10:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="10:00"></div>
                            <div class="class-slot" data-day="friday" data-time="10:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="10:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">11:00 - 12:00</div>
                            <div class="class-slot" data-day="monday" data-time="11:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="11:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="11:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="11:00"></div>
                            <div class="class-slot" data-day="friday" data-time="11:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="11:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">12:00 - 1:00</div>
                            <div class="class-slot" data-day="monday" data-time="12:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="12:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="12:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="12:00"></div>
                            <div class="class-slot" data-day="friday" data-time="12:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="12:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">1:00 - 2:00</div>
                            <div class="class-slot" data-day="monday" data-time="13:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="13:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="13:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="13:00"></div>
                            <div class="class-slot" data-day="friday" data-time="13:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="13:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">2:00 - 3:00</div>
                            <div class="class-slot" data-day="monday" data-time="14:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="14:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="14:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="14:00"></div>
                            <div class="class-slot" data-day="friday" data-time="14:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="14:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">3:00 - 4:00</div>
                            <div class="class-slot" data-day="monday" data-time="15:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="15:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="15:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="15:00"></div>
                            <div class="class-slot" data-day="friday" data-time="15:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="15:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">4:00 - 5:00</div>
                            <div class="class-slot" data-day="monday" data-time="16:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="16:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="16:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="16:00"></div>
                            <div class="class-slot" data-day="friday" data-time="16:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="16:00"></div>
                        </div>
                        
                        <div class="time-row">
                            <div class="time-slot-header">5:00 - 6:00</div>
                            <div class="class-slot" data-day="monday" data-time="17:00"></div>
                            <div class="class-slot" data-day="tuesday" data-time="17:00"></div>
                            <div class="class-slot" data-day="wednesday" data-time="17:00"></div>
                            <div class="class-slot" data-day="thursday" data-time="17:00"></div>
                            <div class="class-slot" data-day="friday" data-time="17:00"></div>
                            <div class="class-slot" data-day="saturday" data-time="17:00"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Assignments Tab -->
            <section id="assignments" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-tasks"></i> Assignments & Deadlines</h2>
                    <button class="add-btn" onclick="openAssignmentModal()">
                        <i class="fas fa-plus"></i> Add Assignment
                    </button>
                </div>
                <div class="assignments-list" id="assignmentsList">
                    <!-- Assignments will be populated by JavaScript -->
                </div>
            </section>

            <!-- Attendance Tab -->
            <section id="attendance" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-check-circle"></i> Attendance Tracker</h2>
                    <button class="add-btn" onclick="openAttendanceModal()">
                        <i class="fas fa-plus"></i> Add Subject
                    </button>
                </div>
                <div class="attendance-summary">
                    <div class="attendance-card">
                        <h3>Overall Attendance</h3>
                        <div class="attendance-percentage" id="overallAttendance">85%</div>
                        <div class="attendance-stats">
                            <span>Present: <span id="presentDays">17</span></span>
                            <span>Absent: <span id="absentDays">3</span></span>
                        </div>
                    </div>
                </div>
                <div class="subjects-list" id="subjectsList">
                    <!-- Subjects will be populated by JavaScript -->
                </div>
            </section>

            <!-- Notices Tab -->
            <section id="notices" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-bullhorn"></i> Digital Notice Board</h2>
                    <button class="add-btn" onclick="openNoticeModal()">
                        <i class="fas fa-plus"></i> Add Notice
                    </button>
                </div>
                <div class="notices-list" id="noticesList">
                    <!-- Notices will be populated by JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Timetable Modal -->
    <div id="timetableModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeTimetableModal()">&times;</span>
            <h3>Add New Class</h3>
            <form id="timetableForm">
                <div class="form-group">
                    <label for="subjectName">Subject Name:</label>
                    <input type="text" id="subjectName" name="subjectName" required>
                </div>
                <div class="form-group">
                    <label for="day">Day:</label>
                    <select id="day" name="day" required>
                        <option value="monday">Monday</option>
                        <option value="tuesday">Tuesday</option>
                        <option value="wednesday">Wednesday</option>
                        <option value="thursday">Thursday</option>
                        <option value="friday">Friday</option>
                        <option value="saturday">Saturday</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="time">Time:</label>
                    <input type="time" id="time" name="time" required>
                </div>
                <div class="form-group">
                    <label for="room">Room:</label>
                    <input type="text" id="room" name="room" required>
                </div>
                <div class="form-group">
                    <label for="professor">Professor:</label>
                    <input type="text" id="professor" name="professor" required>
                </div>
                <button type="submit" class="submit-btn">Add Class</button>
            </form>
        </div>
    </div>

    <!-- Assignment Modal -->
    <div id="assignmentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAssignmentModal()">&times;</span>
            <h3>Add New Assignment</h3>
            <form id="assignmentForm">
                <div class="form-group">
                    <label for="assignmentTitle">Assignment Title:</label>
                    <input type="text" id="assignmentTitle" name="assignmentTitle" required>
                </div>
                <div class="form-group">
                    <label for="subject">Subject:</label>
                    <input type="text" id="subject" name="subject" required>
                </div>
                <div class="form-group">
                    <label for="dueDate">Due Date:</label>
                    <input type="datetime-local" id="dueDate" name="dueDate" required>
                </div>
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" name="description" rows="3"></textarea>
                </div>
                <button type="submit" class="submit-btn">Add Assignment</button>
            </form>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAttendanceModal()">&times;</span>
            <h3>Add New Subject</h3>
            <form id="attendanceForm">
                <div class="form-group">
                    <label for="subjectName">Subject Name:</label>
                    <input type="text" id="subjectName" name="subjectName" required>
                </div>
                <div class="form-group">
                    <label for="totalClasses">Total Classes:</label>
                    <input type="number" id="totalClasses" name="totalClasses" min="1" required>
                </div>
                <button type="submit" class="submit-btn">Add Subject</button>
            </form>
        </div>
    </div>

    <!-- Notice Modal -->
    <div id="noticeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeNoticeModal()">&times;</span>
            <h3>Add New Notice</h3>
            <form id="noticeForm">
                <div class="form-group">
                    <label for="noticeTitle">Notice Title:</label>
                    <input type="text" id="noticeTitle" name="noticeTitle" required>
                </div>
                <div class="form-group">
                    <label for="noticeContent">Notice Content:</label>
                    <textarea id="noticeContent" name="noticeContent" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="priority">Priority:</label>
                    <select id="priority" name="priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">Add Notice</button>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <script src="script.js"></script>
</body>
</html>